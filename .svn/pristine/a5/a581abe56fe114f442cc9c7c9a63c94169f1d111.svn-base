angular.module('vnAppMenuModule', [],function () {})
.controller('vnAppMenuController', function( $scope, vnScreenManagementFactory, vnAppManagementFactory ){

  $scope.currentapp = "images/reception_bell.svg";

	$scope.handleAppMenuClick = function( event ){
      if( $( ".app-menu" ).hasClass( "open" ) ){
        vnScreenManagementFactory.closeMenus();
      }else{
        $scope.registeredApps = vnAppManagementFactory.getRegisteredApps();
        vnScreenManagementFactory.openMenu( ".app-menu" );  
      }
  };

  $scope.handleItemClick = function(){
    vnScreenManagementFactory.switchScreens( '', this.app.screens[0] );
    $scope.currentapp = this.app.icon;
  };
})
.directive('vnAppMenu', function() {
    return {
      restrict: 'E',
      templateUrl: 'menus/vnAppmenu.html'
    };
  });