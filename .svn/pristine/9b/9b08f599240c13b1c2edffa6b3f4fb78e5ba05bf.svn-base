<vn-css vn-id="vnhubmail" vn-css-file="apps/components/mail/vnmail.css"></vn-css>
<div ng-controller="vnMailController" ng-init="init();">
    <div class="vision-mail-hub" >
	    <div class="no-data" ng-show="mail.length < 1">
	        No mail items
	    </div>
	    <div ng-repeat="item in mail" 
				class="mail-item list-group-item" 
				ng-class="{ 'unread' : item.read == false, 'selected' : item.selected == true, 'current' : item.id == currentMailItem.id }"
				ng-right-click="handleRightClick( $event );"
				ng-click="handleItemClick( $event, this );"><!--  -->
			<div>
				<div class="title">{{item.type.displayname}}</div>
				<div class="statuses">
					<div class="status uom fa fa-balance-scale" ng-if="item.uom == null"></div>
					<div class="status flagged fa fa-flag" ng-if="item.flagged == true"></div>
				</div>
			</div>
			
			<div class="content">
				<div class="patient">
					<div ng-if="item.patient != null">
						<div class="name-container">
							<div class="name">{{item.patient.Surname | uppercase}}, {{ item.patient.Forename }} ({{ item.patient.DOB }})</div>
						</div>
						<div class="number-container">
							<div class="label">NHS</div>
							<div class="value">{{item.patient.PatientNumber}}</div>
						</div>
					</div>
				</div>
				<div class="right-container">
					<div class="date">{{item.datereceived | date:'dd-MMM'}}</div>
					<div class="user" ng-if="item.user != null">{{item.user.shortlabel}}</div>
					<div class="no-user" ng-if="item.user == null">NO CLINICIAN</div>
				</div>
				<!--<div class="triangle"></div>
				<div class="fa fa-check check"></div>-->
			</div>
			<div ng-if="item.patient == null">
				<div class="no-patient">NO PATIENT</div>
			</div>
		</div>
        
    </div>
</div>