<vn-css vn-id="vntasks" vn-css-file="apps/components/tasks/vntask.css"></vn-css>
<div class="tasks" 
     ng-controller="vnTaskController"
     ng-init="init();" layout="column" layout-wrap>
    <!--<div class="add" ng-click="handleAddClick( $event );">
        <div><img src="apps/components/images/add.svg"></div>
        <div class="description">Add new task</div>
    </div>-->
    <div class="no-data" ng-show="taskreminders.length < 1">
        No outstanding tasks
    </div>
    
    <vn-card 
        ng-repeat="task in taskreminders" 
        ng-click="handleCardClick()"
        vn-card-action-click="handleActionClick( action, e )"
        vn-card-actions-init="initCardActions( callback )"
        vn-card-entity="task">
        <div ng-if="task.status == '3'" class="decline fa fa-thumbs-o-down">&#160;DECLINED</div>
        <div class="topline">
            <div class="subject">{{task.tasksubjects.label}}</div>
            <div class="assigner"><div>{{task.assigner.shortlabel}}</div></div>
        </div>
        <div class="description">{{task.description}}</div>
        
        <div class="patientname" ng-show="task.attachments.selectedPatients.length > 0">
            <div class="icon fa fa-user"></div>
            <div class="name">{{task.attachments.selectedPatients[0].title}}</div>
            <div class="count" ng-show="task.attachments.selectedPatients.length > 1">+ {{ task.attachments.selectedPatients.length - 1 }} more</div>
        </div>
        <div class="bottomline">
            <div class="left">
                <div class="assignee">
                    @{{ task.assigneefull[0].title }} <span ng-if="task.assigneefull.length > 1">+ {{ task.assigneefull.length - 1 }} more</span>
                </div>
            </div>
            <div class="right">
                <div class="attachment-count fa fa-paperclip">{{ ' ' + task.attachments.attachedDocs.length}}</div>
                <div class="comment-count fa fa-comment-o"> {{task.commentscount}}</div>
            </div>
        </div>
        <div class="urgency" ng-show="task.urgency == 'Urgent'"></div>
    </vn-card>
   


    <!-- <div class="tasks taskreminders list-group-item" ng-repeat="item in taskreminders" ng-right-click="handleRightClick( $event, this )">
        <div class="image"><div><img ng-src="apps/components/images/{{ item.image }}"></div></div>
        <div>
            <div class="workflow"><div>{{ item.workflowname }}</div></div>
            <div class="subject"><div>{{ item.shortdescription }}</div></div>
            <div class="patient" ng-click="handlePatientClick( $event );" ng-show="{{ item.patient != null }}">
                <div><img ng-src="apps/components/images/patient.svg"></div>
                <div>{{ item.patient.displayname}}</div>
            </div>
        </div>
        <div class="actions">
            <div class="action">RE-ALLOCATE</div>
        </div>
    </div> -->
</div>