angular.module('vnActionModule', [],function () {})
.factory('vnActionFactory',  function( visionFactory ){
	var factory = {};
	var canHelpWith = {};

	factory.REVIEW_DOC 			= 1;
	factory.BOOK_SLOT 			= 2;
	factory.GENERAL 			= 3;
	factory.FILE_DOCUMENTS 		= 4;
	factory.TASK_DETAIL 		= 5;
	factory.SEND_MESSAGE 		= 6;
	factory.OVERDUE_TASK 		= 7;
	factory.MAIL_ITEM_DISPLAY 	= 8;


	factory.canHelpWith = function( action, callback ){
		canHelpWith[ action ] = callback;
	};

	factory.needHelpWith = function( action, data, callback ){
		console.log( canHelpWith );
		var helper = canHelpWith[ action ];
		if( helper != null ){
			helper.call( this, data, callback );
		}else{
			visionFactory.retrieveData( database[ ACTION_TYPES ].name, function( results ){
				chrome.notifications.create("NO_HELPER", {
				  type: "basic",
				  title: "No Available Apps",
				  message: "Sorry, we don't yet have an app for " + results[0].description + ", but we're working on it...",
				  iconUrl: "../images/inps_logo_blue_128.png",
				  priority: 2
				}, function(){});
			}, 
	        null,
	        { start: action, end: action });
		}
	}
	return factory;
});